# Static

> '자바의 신, 8장 참조 자료형에 대해서 더 자세히 알아봅시다' 를 보고 생각 한 부분을 정리한 내용 입니다.

## 왜 써야 하는가

보통 static 을 은행 계좌에 비유해서 그 위험성에 대해서만 배웠던 것 같다. static 을 선언한 클래스에서 생성된 객체들이 static 변수나 메소드에 접근할 때, 그 값이 예측 불가능하게 바뀌는 모습을 보며, static 은 조심해서 다뤄야 한다고 배웠다.

그렇다면, 내 코드는 항상 완벽하지 않으니 static은 애초에 쓰지 않는 것이 맞지 않을까?

static 을 쓰지 말아야 하는 이유는 넘쳐나지만, static 을 적용해야 하는 필연적인 이유는 아직 내 짧은 경험상 찾지 못했다.

보통 static 은 귀찮은 작업을 처리하기 위해서 많이 사용해 왔고, 그 위험성에 대해서 깊게 고민하고 사용하지 않았던 날들을 반성한다.

## 쓰면 어떻길래?

static 에 문법적인 요소를 제쳐두고 생각해 본다.

static 은 프로그램의 실행 시작 부터, 종료 까지 생애를 함께 한다.

이 말은, 메모리에 올라 간 static 은 공간을 계속 잡아 먹게 되고, 세밀하게 컨트롤 하지 못하면 메모리 누수로 이어질 수 있다는 말이다.

자바는 메모리 할당, 해제의 개념이 없다. \(있긴하지만 건드리지 않는게 좋다.\)

참조된 객체가 더 이상 사용되지 않는다면, 해당 객체의 메모리는 GC의 대상이 되며, 메모리에서 삭제된다.

객체가 참조되지 않는다는 것은 무엇일까. 어떤 메소드에서 인스턴스를 사용하고 메소드의 행위가 끝나면, 해당 인스턴스는 더 이상 사용되지 않는다.

static 으로 선언한 리스트를 생각해보자.

어떤 메소드가 static 을 선언한 클래스의 객체를 생성하고, 리스트에 값을 넣는다. 한번더. 두번더. 세번더.

객체는 사라질 지 언정, static 으로 선언한 리스트는 프로그램이 끝날 때 까지 남아있고, 결국 메모리를 잡아먹는 하마가 된다.

## 프로그램 시작 부터 끝까지 살아남을 친구가 필요한가?

많은 부분을 프레임워크나 DB를 통해서 해결하려는 시도를 보고 있는 것 같다.

'spring-cloud' 를 통한 시스템 변수 관리나 DB를 통한 업데이트 등이 떠오르는데 정확히 맞는지는 모르겠다.

static을 쓰는 것보다 수고로움이나 비용이 더 들어가지만, 그렇게 까지 해서라도 관리하는 이유가 있을 것 같다.

