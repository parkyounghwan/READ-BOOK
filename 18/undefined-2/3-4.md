# 3, 4

> p151-242

## THREE 코드 재작성하기

코드를 전체적으로 함수 수준에서 변경하는 방법

1. 상관없는 하위문제 추출하기

한마디로 정리하면 **일반적인 목적의 코드를 프로젝트의 특정 코드에서 분리하라**는 것이다.

1. 한 번에 하나씩

지저분하게 나열된 큰 작업\(전체 코드\)를 작은 작업으로 쪼개며, 한 번에 하나의 일만 수행하게 함으로써 가독성을 높인다.

1. 생각을 코드로 만들기

프로그램을 언어로 풀어 써서, 그 설명으로 더 자연스러운 코드를 작성하는 테크닉을 살펴봤다. 설명에서 사용된 단어와 문구를 살펴보는 것은 코드에서 따로 분리할 수 있는 하위문제를 판별하는 데 도움을 주기도 한다.

이 "무언가를 쉬운 말로 설명하기" 방법은, 코드를 작성하는 이상의 적용범위를 갖는다. 러버덕 디버깅 처럼!

1. 코드 분량 줄이기
2. 그 기능을 구현하려고 애쓰지 마라 - 그럴 필요가 없다

프로그래머는 대개 프로젝트에 정말로 필요한 기능이 얼마나 있는지 과대평가 하는 경향이 있다.

한편 프로그래머는 어떤 기능을 구현하는 데 필요한 노력을 과소평가하는 경향도 있다. 우리는 조잡한 프로토타입을 구현하는 시간을 지나치게 낙관적으로 예측하고, 그 코드를 장차 유지보수하고, 문서를 만들고, 코드베이스에 새로운 '무게'를 더하는 데 얼마나 많은 시간이 필요한지는 완전히 잊어버린다.

이거 내 얘긴데.. ?

* 요구사항에 질문을 던지고 질문을 잘게 나누어 분석하라

"요구사항을 제거하기"와 "더 간단한 문제를 해결하기"가 제공하는 이점은 아무리 강조해도 지나치지 않는다.

* 라이브러리에 친숙해져라

실제로 도움을 주는 조언: **매일 15분씩 자신의 표준 라이브러리에 있는 모든 함수/모듈/형들의 이름을 읽어라.** 여기에는 C++의 표준 템플릿 라이브러리\(STL\), 자바 API, 파이썬 내장 모듈 등이 모두 포함된다.

라이브러리 전체를 암기하라는 것이 아니다. 그 안에 무엇이 있는지 감을 잡아놓고, 나중에 새로운 코드를 작성할 때 "잠깐만, 이건 전에 API에서 봤던 거랑 뭔가 비슷한데.."하고 생각할 수 있기를 바라는 것이다.

라이브러리는 '출시할 수 있는' 상태로 완성된 것이다. 이는 코드 한 줄 한 줄 모두 상당한 분량의 설계, 디버깅, 재작성, 문서화, 최적화, 테스트를 거쳤다. 이러한 엄격한 적자생존의 과정을 겪으며 살아남은 코드는 모두 소중하다.

* 코딩 대신 유닉스 도구를 활용하기

'실제' 코드를 작성하지 않아도 유닉스의 명령행 코드를 사용하면 결과를 얻어낼 수도 있다.

## FOUR 선택된 주제들

1. 테스트와 가독성
2. 읽거나 유지보수하기 쉽게 테스트를 만들어라

테스트 코드도 읽기 쉬워야 하는 것은 실제 코드와 마찬가지로 중요하다. 이 장의 전반적인 내용도 예제가 테스트코드로 바뀌었을 뿐 읽기 좋은 코드를 작성하는 법과 거의 같다.

테스트 코드를 작성하는 것을 염두에 두고 기본 코드를 작성하는 것이, 테스트 코드와 기본 코드의 가독성을 둘 다 높이는 데 도움이 된다.

그리고, 테스트의 수정이나 추가가 쉽도록 짜야 한다.

1. '분/시간 카운터'를 설계하고 구현하기

앞 장의 내용들을 모두 활용해 코드를 설계하고 리팩토링한다.

어렵지 않은 내용들이지만 실제 코드를 작성하면서 간과하기 쉬운 내용들인 것 같다.

'적당히'라는 것이 중요한 것 같다. 과해도, 부족해도 문제다.

좀 더 가독성을 높이는 측면에서의 알고리즘?을 배운 느낌이다.

