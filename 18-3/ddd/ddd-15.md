# 관계형 데이터베이스를 위한 객체 설계

데이터베이스를 객체 저장하는 저장소로 사용하면 하나의 테이블 행은 하나의 객체에 대응하도록 해야 한다. 객체와 테이블의 관계는 단순해야 한다. 테이블의 외래키는 다른 ENTITY의 참조로 변환해야 한다. 간혹 다수의 객체가 하나의 테이블에 매핑되는 경우도 있다. 그런 경우 매핑이 투명해서 쉽게 이해할 수 있어야 한다. 객체와 테이블 매핑을 도와주는 매핑 도구가 있으며 다수 객체와 매핑하는 복잡한 기능도 지원한다.

서비스에서 의도하지 않은 레거시, 외부 시스템에서 데이터가 오는 경우에는 두 가지 데이터 모델이 공존할 수 있다. 이런 문제를 해결하는 방법은 책의 다른 부분에서 다룬다고 한다.

외부 시스템과 데이터베이스를 공유해야 하는 경우에 객체와 테이블간 불일치가 있는 게 유용할 수도 있다. 테이블에 존재하는 데이터를 조금 수정해도 외부 시스템에서 사용할 수 있다. 하지만 모델과 데이터베이스가 분리되있음을 의식하고 설계하면 단점을 줄이고 장점을 최대한 많이 취할 수 있다.

정리하자면 최대한 테이블과 객체를 일대일 대응이 되도록 해야하며, 그렇지 않은 경우에는 매핑 관계를 이해할 수 있게 단순한 관계를 유지해야 한다. 객체와 테이블의 불일치가 클수록 복잡성이 증가한다. 내가 생각하기에 복잡성을 해결하기 위해서는 가독성 좋은 코드 작성, 주석 혹은 문서 작성 등의 방법이 있을 것 같다.

