# DDD-18

객체 간 연간관계 조회하는 방법은 객체 내의 컬렉션으로 다른 객체를 저장하여 조회하는 방법과 연관 키로REPOSITORY를 통해 조회하는 방법이 있다. 컬렉션 탐색은 빈번하게 조회하거나 트랜잭션 경합이 문제가 안될 때 적합하고 REPOSITORY를 통한 조회는 조회를 가끔 하거나 트랜잭션 경합이 문제가 될 때 사용한다. 트랜잭션 경합이 문제가 되는 경우는 연관관계 저장할 때 발생한다. 연관관계 저장할 때 락을 거는데 락을 건 객체가 조회가 자주 일어난다면 성능상 문제가 된다.

설계의 타협점은 어디에나 존재하여 설계는 항상 변경될 수 있다. 따라서 객체들을 VALUE OBJECT, ENTITY, AGGREGATE로 모델링하여 설계 변경에 따른 파급효과를 줄이는 게 중요하다. 모든 변경은 AGGREGATE, ENTITY, VALUE OBJECT안으로 캡슐화된다.

객체들로 모델을 구성한 후에는 모듈을 구성해야 한다. 인프라스트럭처를 기준으로 모듈화하면 ENTITY, SERVICE 등의 모듈로 구성된다. 인프라스트럭처를 기준으로 모듈화를 하면 객체가 낮은 응집도를 가지고 객체 간 높은 결합도를 가지게 된다. 모듈 간 연간관계도 복잡하게 구성이 된다.

모듈의 이름이 UBIQUITOUS LANGUAGE에 기여해야 한다. 모듈 간 연간관계가 언어로도 말이 되야 한다. 예를 들어, 모듈이 고객, 해운업무, 결제로 나뉘면 "**고객**을 위해 **해운 업무**를 수행하므로 **결제**를 요구할 수 있다"라는 관계가 있을 수 있다.

