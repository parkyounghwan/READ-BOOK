# DDD-04

## 모델 주도 설계

모델이 실제 구현에 영향을 주지 못한다면 의미가 없다. 여러 설계 방법론에서 분석 모델의 필요성을 얘기 하지만 분석 모델은 도메인 개념만 고려하여 코드와 연결되지 않는다. 결과적으로 개발자는 코딩이 시작되면 즉흥적으로 설계를 하게 된다. 일부 클래스 명과 속성 명은 모델을 반영하지만 설계에는 결국 모델이 반영되지 않는다. 오히려 이렇게 만들어진 모델은 프로젝트를 오도하게 만든다.

코드와 모델이 긴밀하게 연결되면 코드에 의미가 부여된다. 코드가 변경되면 모델에도 변경사항이 반영된다. 도메인 반영과 개발 가능한 설계 두 가지 모두 중요하며 타협해서는 안된다. 모델이 도메인 핵심 개념을 포함해야 하고, 소프트웨어 설계 원칙에 따라 설계가 되어야 한다. 그러면 모델링과 설계가 반복되는 고리를 형성할 수 있다. 구현과 모델을 묶으려면 객체지향같은 모델링 패러다임이 필요하다. 시스템에 다수의 모델보다는 단일 모델이 있는 게 좋다.

## 모델링 패러다임와 소프트웨어 도구

모델 주도 설계가 성과를 내려면 모델과 구현이 긴밀하게 연결되야 한다. 이 때 모델링 패러다임이 필수적이다.

객체지향 프로그래밍은 모델링 패러다임에 근거하고 모델의 구성요소에 대한 구현을 제공한다. 만약 요구사항이 변하지 않는다면 가장 간단한 방법이 적합하다. 하지만 요구사항은 변하고 확장이 필수다. 객체지향 프로그래밍은 손쉽게 제약조건이 지켜지는지 확인하는 단위 테스트를 할 수 있기 때문에 확장에 부담이 적다.

모델이 왜 사용자에게 중요한지 즐겨찾기의 예를 들어 설명한다. 실제로 즐겨찾기는 URL이 저장된 파일이라 파일명에서 사용할 수 없는 문자를 포함해서는 안된다. 하지만 사용자는 즐겨찾기를 웹 사이트 목록으로 인식한다. 따라서 사용자가 즐겨찾기를 저장할 때 사용할 수 없는 문자를 사용하고 문제가 발생한다.

해결 방법은 사용자가 인식하는 모델과 실제 설계/구현 모델을 일치시키는 것이다. 즐겨찾기를 파일로 인식하도록 모델을 변경한다면 사용자가 파일을 활용하듯이 즐겨찾기를 더 잘 사용할 수 있다. 혹은 즐겨찾기를 웹 사이트 목록으로 모델을 변경하면 사용자가 파일명에서 사용할 수 없는 문자를 사용해도 문제가 발생하지 않는다.

## 정리

오늘 읽은 내용을 내가 이해한 대로 정리해보면, 프로젝트는 도메인 분석, 설계, 코딩의 과정을 거치게 된다. 분석과 설계가 서로 영향을 줄 수 있어야 한다. 이런 관계를 만드는 데 객체지향같은 모델링 패러다임이 도움된다.

반복이 가장 효과적인 학습법인 것 같다. 비슷한 내용이 구체적인 예를 통해 반복되니까 책에서 얘기하고 싶은 내용이 조금은 이해가 된다. 특히 즐겨찾기의 예는 도메인과 설계를 만족하는 모델이 왜 중요한지 이해하는 데 도움이 됐다. 실제로 나도 도메인을 이해하고 개발할 때와 단순히 기능 개발할 때 시각이 많이 달랐다. 도메인을 이해하면 감춰져있던 요구사항을 발견할 수 있었다. 결국 도메인을 어떻게 추상적으로 중요한 영역만 이해하냐가 중요한 데, 이전 내용에서 다뤘던 공통 언어 사용이나 기능 구현 후 피드백 받는 방법이 효과적인 방법인 것 같다.

