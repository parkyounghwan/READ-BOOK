# DDD-09

이번주 읽은 내용 중 중요한 개념인 Aggregate를 이해한 대로 정리하기로 했다.

## Aggregate

객체 간 연관관계가 있을 때 객체가 변화되면 변화가 연관관계에 속하는 객체까지 전파된다. 객체의 무결성을 지키기 위해서\(불변식을 만족하기 위해서\) 변화의 범위를 제한할 필요가 있다. 이 범위를 만들어주는 게 Aggregate다.

Aggregate는 root와 내부 객체로 나뉜다. root는 전역적인 식별 값을 가지고 외부의 다른 Aggregate와 통신을 한다. 내부 객체는 변화가 있을 때마다 불변식을 만족하는지 체크하고, root가 삭제되면 내부 객체는 전부 삭제된다. 외부 Aggregate와 통신할 수 없다.

결국 Entity가 많아지면 많아질수록 연관관계를 제어하기 힘들기 때문에 Aggregate가 나온 것 같다. 개념적으로 일치하는 범위가 더 큰 Entity를 만들어 내부 개념을 추상화하기 때문에 모델링이 간결해진다. 그동안의 짧은 경험 상 모델링이 잘되면 동작을 예측할 수 있기 때문에 내부 구현을 볼 필요가 없다.

