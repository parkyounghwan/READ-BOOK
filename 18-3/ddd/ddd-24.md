# DDD-24

도메인에 관한 책을 읽는 게 도움이 될 수 있다. 책을 통해 도메인에서만 다른 의미로 사용하는 용어를 발견할 수 있고 용어들을 알아갈 수록 모델의 발전에 도움이 된다. 용어를 알면 도메인 전문가와의 커뮤니케이션에 도움이 된다. 도메인에 대해 알아갈수록 도메인 전문가에게 좋은 질문을 할 수 있고 도메인 전문가와 함께 모델 검토를 할 수 있다.

좋은 방법을 오래 고민하는 것 보다 많이 시도하는 게 도메인 주도 설계에서 도움이 된다. 설계의 방향을 바꾸는 건 모델에 대한 통찰력을 반영하는 작업이다. 설계를 반복할 수록 중요한 것이 무엇이고 중요하지 않은 것이 무엇인지 알 수 있다. 설계에서 실수를 피하는 방향으로 오랜 시간동안 고민한다면 여러 번 시도하는 게 오히려 더 오랜 시간이 걸릴 수도 있다.

## 불명확한 개념 모델링하는 방법

### 제약조건

제약조건은 암시적으로 존재하는 데 명시적으로 표현하면 설계를 대폭 개선할 수 있다. 단순히 조건 분기를 사용하는 것보다 이름을 가지는 메소드 혹은 클래스로 표현하면 제약조건의 의미가 명확해진다. 제약 조건이 복잡해질수록 좋은 결과를 얻을 수 있다. 다른 장점으로는 제약조건에 이름이 생겼기때문에 제약조건을 쉽게 논의할 수 있다. 호출 메소드보다 제약조건 메소드가 더 비대해지더라도 호출 메소드의 역할이 명확해지기 때문에 문제 없다.

제약조건을 메소드로 표현했을 때 만족스럽지 않는 경우도 있다. 대표적으로 세 가지 경우가 있다.

1. 제약조건을 구현하는 데 객체에 적합하지 않은 데이터가 필요하다
2. 제약조건이 여러 객체에 걸쳐 나타나며 동일한 계층 구조에 속하지 않은 객체 간에 중복 또는 상속관계를 강요한다.
3. 논의는 제약 조건에 초점을 맞춰 이뤄지지만 구현에서는 명시적으로 표현되지 않는다.

   제약조건이 객체가 담당하는 기본 책임을 모호하게 만들거나, 제약조건이 도메인과 관련된 대화에서는 중요하게 다뤄지지만 모델 내에 명확하게 표현돼 있지 않다면 객체로 분리하거나 객체와 관계의 집합으로 모델링할 수 있다.

### 프로세스

모델에서 프로세스를 나타내기가 쉽지 않다. 프로세스가 나타나면 객체를 어색하게 설계하는 경향이 있다. 서비스를 통해 프로세스를 명시적으로 표현할 수 있지만 지나치게 복잡한 알고리즘을 캡슐화하는 문제가 있다.

복잡한 알고리즘 자체를 객체로 만들 수 있다. 어떤 프로세스를 선택하는 고민은 어떤 객체를 선택할지에 대한 고민으로 바뀐다. 객체가 STRATEGY를 표현한다.

도메인 전문가가 이야기하는 프로세스는 명시적으로 드러내고, 프로그램을 구현하기 위해 필요한 프로세스라면 숨겨야 한다.

