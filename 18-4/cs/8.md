# 8장 가상메모리

프로그램이 CPU에서 실행되려면 실행에 당장 필요한 부분이 메모리에 올라와 있어야함

**가상메모리? 프로그램이 0번지부터 시작하는 자기 자신만의 주소공간**

1. 요구 페이징 방식
   * 프로그램 실행 시 프로세스를 구성하는 모든 페이지를 한꺼번에 메모리에 올리는 것이 아니라 당장 사용될 페이지만을 올리는 방식
   * 메모리 사용량 감소, 프로세스 전체를 메모리에 올리는 데 소요되는 입출력 오버헤드 감소
   * 유효-무효 비트를 두어 각 페이지가 메모리에 존재하는지 표시함
   * 요구 페이징 기법의 성능에 가장 큰영향을 미치는 요소: 페이지 부재의 발생 빈도
   * 페이지 부재가 일어나면 요청된 페이지를 디스크로부터 메모리로 읽어오는 막대한 오버헤드가 발생하기 때문
2. 요구 세그먼테이션
3. 페이지 교체
   * 페이지 부재 발생 -&gt; 요청된 페이지를 디스크에서 메모리로 읽어와야함 -&gt; 물리적 메모리에 빈 프레임이 존재하지 않을 경우 메모리에 올라와 있는 페이지 중 하나를 디스크로 쫓아내 메모리에 빈 공간을 확보하는 작업 필요 : 페이지 교체
   * 페이지 부재율을 최소화하는 것이 목표인 교체 알고리즘을 씀
     1. 최적 페이지 교체
        * 페이지 교체 시 물리적 메모리에 존재하는 페이지 중 가장 먼 미래에 참조될 페이지를 쫓아냄
     2. 선입선출 알고리즘
        * 페이지 교체 시 물리적 메모리에 가장 먼저 올라온 페이지를 우선적으로 내쫓음
     3. LRU 알고리즘 
        * 가장 오래전에 참조가 이루어진 페이지를 쫓아냄
     4. LFU 알고리즘

        &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD

        * 과거에 참조 횟수가 가장 적었던 페이지를 쫓아냄

     5. 클럭 알고리즘
        * 하드웨어적인 지원을 통해 이와 같은 알고리즘의 운영 오버헤드를 줄인 방식
4. 페이지 프레임의 할당
   * 프로세스 여러 개가 동시에 수행되는 상황에서, 각 프로세스에 얼마만큼의 메모리 공간을 할당할 것인지 결정해야 함 -&gt; 프로세스마다 페이지 프레임을 균등하게 할당하는 것도 하나의 방법이지만 시스템의 성능 향상을 위해 효율적인 메모리 할당 방법이 필요
   * 할당 알고리즘
     1. 균등할당
     2. 비례할당
     3. 우선순위 할당
5. 전역교체와 지역교체
   * 교체할 페이지를 선정할 때, 교체 대상이 될 프레임의 범위를 어떻게 정할지에 따라 교체 방법을 전역교체, 지역교체로 구분
   * 전역교체 : 모든 페이지 프레임이 교체 대상이 될 수 있는 방법
   * 지역교체 : 현재 수행 중인 프로세스에게 할당된 프레임 내에서만 교체 대상을 선정할 수 있는 방법
6. 스레싱
   * 스레싱 : 집중적으로 참조되는 페이지들의 집합을 메모리에 한꺼번에 적재하지 못하면페이지 부재율이 크게 상승해 CPU 이용률이 급격히 떨어지는 현상
   * 스레싱이 발생하지 않도록 하면서 CPU 이용률을 최대한 높이도록 MPD를 조절하는 것이 중요
     1. 워킹셋 알고리즘
        * 프로세스는 일정 시간 동안 특정 주소 영역을 집중적으로 참조하는 경향이 있는데, 집중적으로 참조되는 페이지들의 집합을 지역성 집합이라고 함
        * 워킹셋 알고리즘은 이러한 지역성 집합이 메모리에 동시에 올라갈 수 있도록 보장하는 메모리 관리 알고리즘
     2. 페이지 부재 빈도 알고리즘
        * 프로세스의 페이지 부재율을 주기적으로 조사하고 이 값에 근거해서 각 프로세스에 할당할 메모리 양을 동적으로 조절
        * 모든 프로세스에게 필요한 프레임을 다 할당한 후에도 프레임이 남는 경우 스왑 아웃되었던 프로세스에게 프레임을 할당하여 MPD를 높임

​ - 과거에 참조 횟수가 가장 적었던 페이지를 쫓아냄

