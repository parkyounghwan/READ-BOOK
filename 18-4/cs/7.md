# 7장 메모리 관리

**메모리란? 주소를 통해 접근하는 저장장치**

## 1. 주소 바인딩

* 논리적 주소\(=가상 주소\)
  * 프로그램이 실행을 위해 메모리에 적재되면 그 프로세스를 위한 독자적인 주소 공간이 생성됨
  * 각 프로세스마다 독립적으로 할당
* 물리적 주소
  * 물리적 메모리에 실제로 올라가는 위치
  * 낮은 주소 영역에 운영체제가 올라가고, 높은 주소 영역에 사용자 프로세스들이 올라감
* 논리적 주소를 물리적 주소로 연결시켜주는 작업을 주소 바인딩이라고 함
  * 컴파일 타임 바인딩
  * 로드 타임 바인딩
  * 실행시간 바인딩
* MMU : 논리적 주소를 물리적 주소로 매핑해주는 하드웨어 장치
  * MMU 기법에서 사용자 프로그램이나 CPU는 논리적 주소만을 다룰 뿐, 실제 물리적 주소는 알지 못하며 알아야 할 필요도 없음

## 2. 메모리 관리와 관련된 용어

1. 동적로딩
   * 동적로딩: 여러 프로그램이 동시에 메모리에 올라가서 수행되는 다중 프로그래밍 환경에서 메모리 사용의 효율성을 높이기 위해 사용하는 기법
   * 프로세스 내에서 실행에 필요한 부분이 실제로 불릴 때마다 메모리에 적재하는 것
2. 동적연결
   * 연결: 프로그래머가 작성한 소스 코드를 컴파일하여 생성된 목적파일, 이미 컴파일된 라이브러리 파일들을 묶어 하나의 실행파일을 생성하는 과정
   * 동적연결: 컴파일을 통해 생성된 목적 파일과 라이브러리 파일 사이의 연결을 프로그램 실행 심점까지 지연시키는 기법
3. 중첩
   * 프로세스의 주소 공간을 분할해 실제 필요한 부분만을 메모리에 적재하는 기법
4. 스와핑
   * 메모리에 올라온 프로세스의 주소 공간 전체를 디스크의 스왑 영역에 일시적으로 내려놓는 것

## 3. 물리적 메모리의 할당 방식

1. 연속할당
   * 프로세스를 메모리에 올릴 때 그 주소 공간을 여러 개로 분할하지 않고 물리적 메모리의 한 곳에 연속적으로 적재하는 방식
   * 고정분할
     * 물리적 메모리를 주어진 개수만큼의 영구적인 분할로 미리 나누어두고 각 분할에 하나의 프로세스를 적재해 실행시킴
   * 가변분할
     * 메모리에 적재되는 프로그램의 크기에 따라 분할의 크기, 개수가 동적으로 변하는 방식
2. 불연속할당
   * 하나의 프로세스가 물리적 메모리의 여러 위치에 분산되어 올라갈 수 있는 메모리 할당 기법
   * 페이징 기법
     * 프로세스의 주소 공간을 동일한 크기의 페이지 단위로 나누어 물리적 메모리의 서로 다른 위치에 페이지들을 저장하는 방식
       1. 주소 변환 기법
          * 페이징 기법에서는 CPU가 사용하는 논리적 주소를 페이지 번호와 페이지 오프셋으로 나누어 주소 변환에 사용함
       2. 페이지 테이블의 구현
          * 페이징 기법에서 주소 변환을 하기 위한 자료구조로, 물리적 메모리에 위치함
          * 현재 CPU에서 실행 중인 프로세스의 페이지 테이블에 접근하기 위해 운영체제는 2개의 레지스터를 사용함
            1. 페이지 테이블 기준 레지스터 \(메모리 내에서의 페이지 테이블의 시작 위치\)
            2. 페이지 테이블 길이 레이즈터 \(페이지 테이블의 크기\)
          * 페이지 테이블 접근 오버헤드를 줄이고 메모리의 접근 속도를 향상시키기 위해 TLB라고 불리는 고속의 주소 변환용 하드웨어 캐시가 사용됨
       3. 계층적 페이징
          * 페이지 테이블에 사용되는 메모리 공간의 낭비를 줄이기 위해 2단계 페이징 기법을 사용함
       4. 역페이지 테이블
          * 물리적 메모리의 페이지 프레임 하나당 페이지 테이블에 하나씩의 항목을 두는 방식
          * 논리적 주소에 대해 페이지 테이블을만드는 것이 아니라 물리적 주소에 대해 페이지 테이블을 만드는 것
       5. 공유 페이지
          * 공유코드: 메모리 공간의 효율적인 사용을 위해 여러 프로세스에 의해 공통으로 사용될 수 있도록 작성된 코드
          * 공유 페이지: 공유 코드를 담고 있는 페이지, 물리적 메모리에 하나만 적재되어 메모리를 좀더 효율적으로 사용할 수 있게 함
       6. 메모리 보호
          * 
   * 세그먼테이션 기법
     * 프로세스의 주소 공간을 의미 단위의 세그먼트로 나누어 물리적 메모리에 올리는 기법
     * 의미를 가질 수 있는 논리적인 단위로 나눈 것이기 때문에 그 크기가 균일하지 않다는 점
     * 크기가 균일하지 않은 세그먼트들을 메모리에 적재하는 부가적인 관리 오버헤드가 뒤따름
   * 페이지드 세그먼테이션 기법
     * 페이징 기법과 세그먼테이션 기법의 장점만을 취하는 주소 변환 기법
     * 세그먼테이션 기법과 마찬가지로 프로그램을 의미 단위의 세그먼트로 나눔
     * 하나의 세그먼트 크기를 페이지 크기의 배수가 되도록 함으로써 세그먼테이션 기법에서 발생하는 외부조각의 문제점을 해결

