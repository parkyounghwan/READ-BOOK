# 0118-JS

## 자바스크립트는 왜 그 모양일까? 10장 ~ 12장 \(123p ~ 142p\)

> 저자 : 더글러스 크락포드   
>  1월 4주차 기록 \(읽은 날짜 1월 18일\)

## 10장. 빈 값

* 빈 값\(bottom value\) : 재귀적 데이터 구조의 끝을 가리키거나 값이 없음을 뜻하는 특수한 값
* JS에서 빈 값 : `null` `undefined`
* `undefined`는 자바스크립트 스스로가 값으로 사용한다. 변수를 정의하고 초기화하지 않으면 JS는 묵시적으로 이 변수 값을 `undefined`로 초기화한다.
* `typeof null`은 `object`이다.

## 11장. 문장

* 프로그래밍 언어는 표현언어, 문장언어로 나눌 수 있다.
* 문장 언어 : 문장 + 표현식 \| 표현 언어 : 표현식
* JS를 포함한 대부분의 인기 있는 언어들은 문장 언어이다.
* 초기 프로그램에서 명령어가 마침표로 끝나는 경우도 있었지만, 소수점과 헷갈릴 수 있어 세미콜론을 사용하기 시작
* 구조적 프로그래밍은 문장 목록이 다른 문장 안에 중철될 수 있도록 허용
* ALGOL 60은 문장 블록을 `BEGIN`과 `END`로 표시함, BCPL은 중괄호를 사용함

#### 선언문

* JS에는 모듈이나 함수 내에서 변언을 선언할 수 있는 세 가지 문장이 있음 `let` `const` `function`
* `let` : 현재 스코프에 새로운 변수 선언, 모든 블록은 그만의 스코프를 생성하고 스코프 밖에서는 변수가 보이지 않음, 변수를 초기화하지 않으면 `undefined`가 할당됨, 구조분해 할당도 허용
* `function` : 함수 객체를 만들고 이를 저장할 수 있는 변수를 지정한다. 
  * 호이스팅 : 지정한 위치가 아닌, 함수 몸체나 모듈의 최상위로 옮겨짐 -&gt; 블록 내에 위치하는 것은 좋지 않음!
* `const` : 초기화가 반드시 있어야 하며, 변수가 나중에 선언될 수 없음. 다른 값을 할당할 수는 없지만, 할당된 객체나 배열의 값을 바꾸는 것은 가능함
* **변수와 값의 차이 : 변수는 값에 대한 참조를 담고 있으며, 값은 절대 변수를 가질 수 없음**

#### 표현식

* 할당문 : 변수의 참조를 바꾸거나, 변경 가능한 객체 혹은 배열을 수정함
  * 좌측값, 할당 연산자, 저장할 값을 나타내는 표현식, 세미콜론
  * 증감 연산자는 포인터 연산을 하기 위해 만들어진 연산자이므로 최근에 나온 언어는 포인터 연산을 더 이상 허용하지 않는다. **전위 증감과 후위 증감을 혼동하기 쉽고 에러 찾기가 어려우므로 지양하는 것이 좋다.**
* 표현식 : 비순수성, 반환 값이 필요없거나 버리는 호출문은 함수의 사이드이펙트에 의존한다.

#### 분기

* `switch` 문의 사용은 권장하지 않는다. if문으로도 충분히 대체가 가능하다.
* **객체를 써서 `switch`문을 대신할 수 있다. 각 케이스별로 처리해야 할 동작을 구현한 함수들로 객체를 채우고 case의 값을 객체의 키로 사용할 수 있다.**
* `if`문은 `switch`문보다 좋다. `else`는 문이 아니라 절이므로 이전 블록을 닫는 중괄호와 같은 줄에 두어야 한다.

#### 반복문

* `for` : 배열 요소를 한 번에 하나씩 처리하고, 반복문 내에서 처리할 배열 및 배열 요소와 연관된 변수 관리는 개발자에게 맡긴다. -&gt; `forEach`와 같은 배열 메소드를 사용하는 것이 좋다.
* 반복문을 만드는 가장 좋은 방법은 꼬리 재귀를 사용하는 것이다. \(16장에 나옴\)

#### 구두법

* if나 else 문에는 단일 문장이나 블록 모두 사용 가능하다. 하지만 문장이 단 하나라도, **블록을 쓰는 것이 좋다.** 에러 없이 코드를 쉽게 개선시킬 수 있고 코드를 더 탄력적으로 만들 수 있다.
* JS에는 자동 세미콜론 삽입이라는 기능이 있지만 세미콜론을 넣은 코드를 작성하는 것이 좋다.

### 12장. 함수

* 그레이스 호퍼는 `A-0`이라고 명명된 루틴을 개발했고 이것이 최초의 컴파일러이다.
* C 언어는 서브루틴과 함수를 합쳐서 함수라고 불렀다.
* JS에서는 `function` 연산자를 사용하여 함수 객체를 생성한다. 이 연산자는 매개변수 목록과 문장 블록을 구성된 함수 몸체를 전달받는다. 각 인자 뒤에는 `=`와 표현식이 나올 수 있고, 인자로 전달되는 값이 `undefined` 라면 표현식의 값이 초기화에 사용된다.
* 매개변수보다긴 인자들은 함수에서 무시되며 빠진 인자는 `undefined` 값으로 지정된다.

#### `...` 연산자

* `...` 연산자는 인자 목록이나 매개변수 목록에서 사용할 수 있다.
  * 인자 목록에서 사용하면 spread 연산자가 되고, 매개변수 목록에서 사용하면 rest 문이 된다.
  * rest문을 쓰는 매개변수는 매개변수 목록에서 가장 마지막에 나와야 한다.

#### 활성 객체

* **함수가 호출되면 활성 객체가 만들어진다. 활성 객체는 눈에 보이지 않는 숨겨진 데이터 구조로서 호출된 함수의 반환 주소와 실행에 필요한 정보를 저장하고 이를 호출된 함수에 바인딩한다.**
* C는 스택에 활성 객체가 저장되지만 JS에서는 **힙**에 저장된다.
* 함수가 종료된다고 활성 객체를 자동으로 비활성화하지 않고 가비지 컬렉터에 의해 처리된다.

| 활성객체가 가지고 있는 정보 | 설명 |
| :--- | :--- |
| 함수 객체에 대한 참조 |  |
| 함수를 호출한 측의 활성 객체에 대한 참조 | `return` 문이 실행 흐름을 함수 호출로 돌릴 때 사용 |
| 함수 호출이 끝난 뒤 실행을 재개하기 위해 필요한 정보 | 보통은 함수 호출문 바로 다음 명령어의 주소 |
| 함수 매개변수 | 인자에 의해 초기화 |
| undefined로 초기화된 함수 변수들 |  |
| 임시 변수 | 함수가 복잡한 표현식을 계산하기 위함 |
| this 참조 | 함수 객체가 메소드로 호출되었을 때 사용 |

#### 함수 객체

* 함수 객체는 다른 객체와 마찬가지로 속성을 가지고 있으며 변경이 가능하다. \(보안 취약\)
* `prototype`이라는 속성을 가지고 있으며 특정 상태에 있는 요소를 선택하기 위한 pseudo classical model에서 사용된다.
* 함수 객체에는 2가지 속성이 숨겨져 있다. 
  * **함수 실행 코드에 대한 참조**
  * **함수 객체가 생성되는 시점에 활성화된 활성 객체에 대한 참조** -&gt; 클로저가 가능한 이유
* 자유 변수 : 함수가 함수 바깥에 선언된 함수를 사용하는 것을 설명하기 위해 만든 단어
* 묶인 변수 : 매개변수를 포함해서 함수 내부에 선언된 변수
* 함수는 중첩될 수 있으며 내부 함수 객체가 생성되면 이 객체는 자신을 생성한 외부 함수에 대한 활성 객체의 참조를 가지게 된다.
* 함수 객체가 외부 함수에 대한 활성 객체의 참조를 가지는 방식 =&gt; **클로저\(closure\)** 

